<html>
<head>
    <script src="signalsource.js" type="text/javascript"></script>
    <script src="iirlowpassfilter.js" type="text/javascript"></script>
    <script src="microphoneinput.js" type="text/javascript"></script>
    <style>
    input {
        border:  0;
        margin-top: -110px;
        margin-bottom: -100px;
    }
    
    #up, #down, input{
        font-size: 192px;
        color: #800000;
        font-family: Arial;
    }
    
    #up, #down {
        cursor: pointer;
        margin: 0;
        font-weight: bold;
    }
   
    body, input {
        background-color: #000000; 
        padding: 0;
    }
    
    #container, input {
        width: 340px;
    }
    
    #container {
        text-align: center;
    }

    </style>
</head>
<body>
<div id="container">
<a nohref id="up">^</a>
<input type="number" value="500" min="0" max="1000" step="1" id="fillfactor"/>
<a nohref id="down">v</a>
</div>
</body>
</html>
<script type = "text/javascript">

var FillFactor = {

    data : {
        value : 0.5,
        _min : 0.25,
        _max : 1
    },
    
    icrement : {
        values : {
            normal : 0.001,
            fast : 0.01,
            ultra : 0.05,
            current : "normal"
        },
        consecutiveChangesCounter : 0,
        consecutiveChangesStepUp : 50,
        
        getValue : function () {
            if (this.consecutiveChangesCounter++ < this.consecutiveChangesStepUp){
                if (this.values.current == "normal" )
                    this.values.current = "fast";
                else if (this.values.current == "fast")
                    this.values.current = "ultra";
            }
            return this.values[this.values.current];
        },
        
        reset : function () {
            this.values.current = "normal";
            this.consecutiveChangesCounter = 0;
        }
    },
    
    setValue : function (val) {
        if (val < this.data._min)
            val = this.data._min;
        else if (val > this.data._max)
            val = this.data._max;
        this.data.value = val;
        this.onchange.runcbs();
    },
    
    increment : function {
        this.setValue (this.data.value + this.icrement.getValue());
        return this.data.value;
    },
        
    decrement : function {
        this.setValue (this.data.value - this.icrement.getValue());
        return this.data.value;
    },

    onchange : {
        funcs : [],
        add : function (cb) {
            funcs.push (cb);
        },
        runcbs : function () {
            for (var i = 0; i < this.funcs.length; i++)
                if (this.funcs[i]) this.funcs[i]();
        }
    }

};

</script>